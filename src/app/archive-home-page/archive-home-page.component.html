<div class="padding-16">
  <div class="search-container">
    <mat-form-field>
      <input matInput type="search" placeholder="Search" [(ngModel)]="vm.searchInput" (ngModelChange)="onSearch(vm.searchInput)"/>
        <mat-icon *ngIf="!vm.searchInput" matSuffix mat-icon-button aria-label="Search">search</mat-icon>
        <mat-icon *ngIf="vm.searchInput" matSuffix mat-icon-button aria-label="Clear" (click)="onSearch('')">close</mat-icon>
    </mat-form-field>
  </div>
  <mat-drawer-container class="email-container">
    <mat-drawer mode="side" class="email-list" opened>
      <table mat-table [dataSource]="vm.displayedEmails">
        <div matColumnDef="email">
          <td mat-cell *matCellDef="let email; index as i" [ngClass]="{'accent-color-bg': i === vm.selectedIndex}">
            <app-email-item [email]="email" [searchText]="vm.searchText" (click)="vm.selectedIndex = i"></app-email-item>
          </td>
          <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>    
        </div>
      </table>
      <div *ngIf="vm.searchInput && vm.filteredArchiveEmails?.length === 0" class="no-results">No Results</div>
    </mat-drawer>
    <mat-drawer-content>
      <app-email-body [email]="vm.displayedEmails ? vm.displayedEmails[vm.selectedIndex] : null" 
        [searchText]="vm.searchText">
      </app-email-body>
      <div *ngIf="vm.searchInput && vm.filteredArchiveEmails?.length === 0" class="no-results">No Email Selected</div>
    </mat-drawer-content>
  </mat-drawer-container>
  <mat-paginator [length]="vm.filteredArchiveEmails?.length" [pageSize]="pageSize" hidePageSize="true" 
    (page)="onPageChange($event.pageIndex)">
  </mat-paginator>
</div>
